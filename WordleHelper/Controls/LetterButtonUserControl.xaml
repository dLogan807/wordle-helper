<UserControl
  x:Class="WordleHelper.Controls.LetterButtonUserControl"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:converters="clr-namespace:WordleHelper.Converters"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:WordleHelper.Controls"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:models="clr-namespace:WordleHelper.Models"
  x:Name="parent"
  d:DataContext="{d:DesignInstance Type=models:Letter}"
  d:DesignHeight="30"
  d:DesignWidth="30"
  mc:Ignorable="d"
>
  <UserControl.Resources>
    <converters:LetterColorConverter x:Key="letterColorConverter" />
    <Storyboard x:Key="hideLetterButtonStoryboard" Completed="LetterHideAnim_Completed">
      <DoubleAnimation
        Storyboard.TargetName="letterButtonScaleTransform"
        Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
        To="0"
        Duration="0:0:0.1"
      >
        <DoubleAnimation.EasingFunction>
          <SineEase EasingMode="EaseIn" />
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
    </Storyboard>
    <Storyboard x:Key="showLetterButtonStoryboard">
      <DoubleAnimation
        Storyboard.TargetName="letterButtonScaleTransform"
        Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
        To="1"
        Duration="0:0:0.1"
      >
        <DoubleAnimation.EasingFunction>
          <SineEase EasingMode="EaseOut" />
        </DoubleAnimation.EasingFunction>
      </DoubleAnimation>
    </Storyboard>
  </UserControl.Resources>
  <Grid x:Name="LayoutRoot" DataContext="{Binding ElementName=parent}">
    <Button x:Name="LetterButton" Width="30" Height="30" Style="{StaticResource BaseButton}">
      <Button.Triggers>
        <EventTrigger RoutedEvent="Button.Click">
          <BeginStoryboard Storyboard="{StaticResource hideLetterButtonStoryboard}" />
        </EventTrigger>
      </Button.Triggers>
      <Border
        Width="30"
        Height="30"
        Background="{Binding Path=Letter.Correctness, Converter={StaticResource letterColorConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnSourceUpdated=True}"
      >
        <Border.RenderTransform>
          <ScaleTransform x:Name="letterButtonScaleTransform" CenterY="15" ScaleX="1" ScaleY="1" />
        </Border.RenderTransform>
        <TextBlock
          VerticalAlignment="Center"
          FontSize="16"
          FontWeight="Bold"
          Foreground="White"
          Text="{Binding Path=Letter.ValueUpper}"
          TextAlignment="Center"
        />
      </Border>
    </Button>
  </Grid>
</UserControl>
