<UserControl
  x:Class="WordleHelper.Controls.LetterButtonUserControl"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:converters="clr-namespace:WordleHelper.Converters"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:local="clr-namespace:WordleHelper.Controls"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:models="clr-namespace:WordleHelper.Models"
  x:Name="parent"
  d:DataContext="{d:DesignInstance Type=models:Letter}"
  d:DesignHeight="30"
  d:DesignWidth="30"
  mc:Ignorable="d"
>
  <UserControl.Resources>
    <converters:LetterColorConverter x:Key="letterColorConverter" />
    <Style x:Key="MyButtonStyle" TargetType="Button">
      <Setter Property="OverridesDefaultStyle" Value="True" />
      <Setter Property="Margin" Value="5" />
      <Setter
        Property="Background"
        Value="{Binding Path=Letter.Correctness, Converter={StaticResource letterColorConverter}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnSourceUpdated=True}"
      />
      <Setter Property="Foreground" Value="White" />
      <Setter Property="FontWeight" Value="Bold" />
      <Setter Property="FontSize" Value="16" />
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="Button">
            <Border
              Padding="4,2"
              Background="{TemplateBinding Background}"
              BorderBrush="DarkGray"
              BorderThickness="1"
            >
              <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Border>
            <ControlTemplate.Triggers>
              <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Opacity" Value="0.9" />
              </Trigger>
            </ControlTemplate.Triggers>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </UserControl.Resources>
  <Grid x:Name="LayoutRoot" DataContext="{Binding ElementName=parent}">
    <Button
      Width="30"
      Height="30"
      Command="{Binding Path=DataContext.CycleLetterCommand, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"
      CommandParameter="{Binding Path=Letter}"
      Content="{Binding Path=Letter.Value}"
      Style="{StaticResource MyButtonStyle}"
    />
  </Grid>
</UserControl>
